<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <template id="runbot.branch">
      <t t-call='website.layout'>
        <div class="container-fluid">
          <div class="row">
            <div class='col-md-12'>
              <div class="navbar navbar-default">
                <h3>
                  <div class="btn-toolbar mb-1" role="toolbar">
                    <div class="btn-group w-100" role="group">
                      <a t-att-href="branch.branch_url" class="btn btn-default text-left border-0" title="View Branch on Github"><i class="fa fa-github"/></a>
                      <a groups="runbot.group_runbot_admin" class="btn btn-default fa fa-list text-left border-0" t-attf-href="/web/#id={{branch.id}}&amp;view_type=form&amp;model=runbot.branch" target="new" title="View Branch in Backend"/>
                      <span class="text-muted"><t t-esc="branch.remote_id.short_name"/>:</span><t t-esc="branch.name"/>
                    </div>
                  </div>
                </h3>
              </div>
              <table class="table table-condensed table-responsive table-stripped">
                <tr>
                  <td>Remote:</td>
                  <td t-esc="branch.remote_id.name"></td>
                </tr>
                <tr>
                  <td>Head:</td>
                  <td t-esc="branch.head_name"></td>
                </tr>
                <tr>
                  <td>Bundle:</td>
                  <td>
                    <small>
                      <div class="btn-toolbar mb-1" role="toolbar">
                        <div class="btn-group btn-group-ssm w-100" role="group">
                            <a t-attf-href="/runbot/bundle/{{branch.bundle_id.id}}" t-esc="branch.bundle_id.name" class="btn btn-default text-left" title="View Bundle Details"/>
                        </div>
                    </div>
                    </small>
                  </td>
                </tr>
                <t t-if="branch.is_pr">
                  <tr>
                    <td>Pull Head Name</td>
                    <td t-esc="branch.pull_head_name"></td>
                  </tr>
                  <tr>
                    <td>Pull Head Remote</td>
                    <td t-esc="branch.pull_head_remote_id.name"></td>
                  </tr>
                  <tr>
                    <td>Target Branch</td>
                    <td t-esc="branch.target_branch_name"></td>
                  </tr>
                </t>
              </table>
              <table class="table table-condensed table-stripped" style="table-layout: initial;">
                <tr t-foreach='reflogs' t-as='reflog'>
                  <td t-esc="reflog.date"/>
                  <td t-esc="reflog.branch_id.remote_id.short_name"/>
                  <td t-esc="reflog.branch_id.name"/>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </t>
    </template>
  </data>
</odoo>
